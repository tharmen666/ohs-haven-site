<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OHS Haven — No Paperwork, Just Safety</title>
  <link rel="icon" href="assets/favicon.svg" />
  <link rel="preload" as="image" href="assets/logo.png" />
  <link rel="preload" as="image" href="assets/avatar.jpg" />
  <style>
    /* ===== Brand + Layout ===== */
    :root{
      --navy:#0B1C2E; --navy-2:#0a1a2f; --ink:#EAF3FF;
      --orange:#FF6A00; --orange-2:#FF8A33;
      --aqua:#49E1E1; --green:#00FF99; --blue:#3366FF;
      --card:#0F2138; --line:#213A59; --muted:#9FB4C9;
      --ring:rgba(73,225,225,.25); --max:1180px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--ink);
      background: radial-gradient(1100px 600px at 15% -10%, #11385f 0%, transparent 60%),
                  linear-gradient(180deg, var(--navy) 0%, var(--navy-2) 100%);
      font: 400 16px/1.55 system-ui, Segoe UI, Inter, Roboto, Arial, sans-serif;
    }
    .wrap{max-width:var(--max);margin:auto;padding:0 20px}
    a{color:inherit;text-decoration:none}

    /* ===== Header (BIGGER logo/title/avatar) ===== */
    header.sitebar{
      position:sticky;top:0;z-index:50;
      background: linear-gradient(90deg, #0a1a2f, #003366);
      border-bottom: 3px solid var(--orange);
      box-shadow: 0 6px 24px rgba(0,0,0,.25);
    }
    .bar{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:16px 0}
    .brand{display:flex;align-items:center;gap:18px}
    .brand .logo{height:84px;width:auto;display:block;border-radius:12px;background:#0b1c2e}
    .brand .title{
      margin:0; font-size:3.2rem; line-height:1; letter-spacing:.4px;
      background: linear-gradient(90deg, var(--aqua), var(--green));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 2px 0 rgba(0,0,0,.25);
    }
    .avatar{
      height:84px;width:84px;border-radius:50%;object-fit:cover;
      border:3px solid var(--aqua); box-shadow:0 0 0 4px var(--ring)
    }

    /* ===== Hero ===== */
    .hero{padding:56px 0 8px;text-align:center}
    .hero h1{font-size:3rem;margin:.2rem 0 10px;color:var(--orange)}
    .hero p{color:var(--muted);max-width:820px;margin:0 auto 22px}
    .cta{display:flex;flex-wrap:wrap;gap:14px;justify-content:center}
    .btn{
      display:inline-block; font-weight:800; padding:13px 22px; border-radius:14px; cursor:pointer; border:none;
      box-shadow:0 10px 26px rgba(0,0,0,.25), 0 0 0 3px rgba(255,255,255,.02) inset;
      transition:transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform:translateY(-1px); filter:brightness(1.05)}
    .btn.orange{background:linear-gradient(45deg,var(--orange),var(--orange-2)); color:#fff}
    .btn.aqua{background:linear-gradient(45deg,var(--green),var(--aqua)); color:#001a16}
    .btn.blue{background:linear-gradient(45deg,var(--blue),#00ccff); color:#fff}

    /* ===== Sections ===== */
    section{margin:26px 0}
    h2{font-size:1.8rem;margin:0 0 10px}
    .panel{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px}
    .grid{display:grid;gap:16px}
    .grid.cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}
    .grid.cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .card{background:#0f2238;border:1px solid var(--line);border-radius:14px;padding:16px;min-height:88px}
    .pill{display:inline-block;background:#0e2036;border:1px solid #274667;color:#cfe3ff;padding:4px 10px;border-radius:999px;font-size:12px}

    /* Posters */
    .poster{width:100%;height:430px;object-fit:cover;border-radius:12px;border:2px solid var(--line);
      box-shadow:0 12px 32px rgba(0,0,0,.35)}
    .poster:hover{transform:translateY(-2px);transition:.15s}

    /* Forms */
    .fieldset{background:#0f2136;border:1px solid #193451;border-radius:16px;padding:16px}
    label{display:block;color:#cfe4ff;margin:10px 0 6px}
    input,select,textarea{width:100%;background:#0c1c2d;border:1px solid #244362;color:#eaf3ff;border-radius:10px;padding:12px}
    input:focus,select:focus,textarea:focus{border-color:var(--aqua);box-shadow:0 0 0 3px var(--ring);outline:none}

    /* ===== Melly Bubble (FAQ widget) ===== */
    .melly-fab{
      position:fixed; right:20px; bottom:20px; z-index:60;
      width:76px;height:76px;border-radius:50%; overflow:hidden; cursor:pointer;
      border:3px solid var(--aqua); box-shadow:0 14px 34px rgba(0,0,0,.35);
      background:#0f2138;
    }
    .melly-fab img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    .melly-box{
      position:fixed; right:20px; bottom:110px; z-index:59; width:360px; max-width:92vw;
      background:#0f2238; border:1px solid var(--line); border-radius:14px; display:none; overflow:hidden;
      box-shadow:0 16px 38px rgba(0,0,0,.5)
    }
    .melly-head{background:linear-gradient(90deg,var(--orange),var(--orange-2)); color:#fff; padding:10px 12px; font-weight:800}
    .melly-body{display:flex;gap:10px; padding:12px}
    .melly-body .pic{width:48px;height:48px;border-radius:50%;overflow:hidden;border:2px solid #284a74}
    .melly-body .txt{font-size:.95rem;color:#eaf4ff}
    .melly-actions{display:flex;gap:8px;flex-wrap:wrap;padding:0 12px 12px}
    .melly-actions button{background:#153359;border:1px solid #2a5282;color:#dff3ff;border-radius:999px;padding:8px 12px;cursor:pointer}

    /* Responsive tweaks */
    @media (max-width:980px){
      .brand .title{font-size:2.4rem}
      .brand .logo{height:68px}
      .avatar{height:68px;width:68px}
      .grid.cols-4{grid-template-columns:repeat(2,minmax(0,1fr))}
      .grid.cols-3{grid-template-columns:repeat(2,minmax(0,1fr))}
      .poster{height:340px}
    }
  </style>
</head>
<body>

  <!-- ===== HEADER ===== -->
  <header class="sitebar">
    <div class="wrap bar">
      <div class="brand">
        <img class="logo" src="assets/logo.png" alt="OHS Haven logo" />
        <h1 class="title">OHS Haven</h1>
      </div>
      <img class="avatar" src="assets/avatar.jpg" alt="Melly" id="mellyToggleTop" />
    </div>
  </header>

  <main class="wrap">
    <!-- ===== HERO ===== -->
    <section class="hero">
      <h1>No Paperwork, Just Safety</h1>
      <p>Automated checklists, ready-to-print posters & ergonomics nudges — powered by Melly. Zero spreadsheets, zero drama.</p>
      <div class="cta">
        <a href="#features" class="btn orange">See Features</a>
        <a href="#daily" class="btn blue">Run Daily Checklist</a>
        <a href="/ergo/" class="btn aqua">Ergonomics (Beta)</a>
        <a href="#downloads" class="btn orange">Downloads</a>
        <a href="#contact" class="btn blue">Contact</a>
      </div>
    </section>

    <!-- ===== FEATURES ===== -->
    <section id="features" class="panel">
      <h2>Features</h2>
      <div class="grid cols-4">
        <div class="card"><span class="pill">Lead capture</span><br/>auto email + WhatsApp follow-up</div>
        <div class="card"><span class="pill">Checklists</span><br/>Daily / Weekly / Monthly</div>
        <div class="card"><span class="pill">Escalation</span><br/>near-loss themes & alerts</div>
        <div class="card"><span class="pill">Posters & kits</span><br/>downloads / merch</div>
      </div>
    </section>

    <!-- ===== DAILY CHECKLIST (Netlify Form) ===== -->
    <section id="daily">
      <h2>Daily Checklist</h2>
      <form class="fieldset" name="daily-checklist" method="POST" data-netlify="true">
        <input type="hidden" name="form-name" value="daily-checklist" />
        <div class="grid cols-4">
          <div><label>Site / Location</label><input name="site" placeholder="e.g., Astron Rivonia" required /></div>
          <div><label>Shift</label><select name="shift"><option>AM</option><option>PM</option><option>Night</option></select></div>
          <div><label>Supervisor</label><input name="supervisor" placeholder="Name & surname" /></div>
          <div><label>Fuel area tidy?</label><select name="fuel_area"><option>Yes</option><option>No</option></select></div>
          <div><label>Spill kit stocked?</label><select name="spill_kit"><option>Yes</option><option>No</option></select></div>
          <div><label>Fire points clear?</label><select name="fire_points"><option>Yes</option><option>No</option></select></div>
          <div><label>Near-loss observed?</label><select name="near_loss"><option>No</option><option>Yes</option></select></div>
          <div><label>Notes</label><input name="notes" placeholder="Anything to escalate?" /></div>
        </div>
        <div style="margin-top:12px"><button class="btn orange" type="submit">Send</button> <span class="pill">Auto-email + WhatsApp follow-up</span></div>
      </form>
    </section>

    <!-- ===== POSTERS ===== -->
    <section id="downloads" class="panel">
      <h2>Step-by-Step Training Posters</h2>
      <div class="grid cols-4">
        <img class="poster" src="assets/posters/first-aid.jpg" alt="First Aid"
             onerror="this.onerror=null;this.src='assets/posters/FIRST-AID.jpg'">
        <img class="poster" src="assets/posters/spill-response.jpg" alt="Spill Response"
             onerror="this.onerror=null;this.src='assets/posters/SPILL-RESPONSE.jpg'">
        <img class="poster" src="assets/posters/evacuation.jpg" alt="Evacuation"
             onerror="this.onerror=null;this.src='assets/posters/EVACUATION.jpg'">
        <img class="poster" src="assets/posters/customer-service.jpg" alt="Customer Service"
             onerror="this.onerror=null;this.src='assets/posters/CUSTOMER-SERVICE.jpg'">
      </div>
      <p style="color:var(--muted);margin:10px 2px 0">We’ll flip these to paid Gumroad links when you’re ready.</p>
    </section>

    <!-- ===== CONTACT ===== -->
    <section id="contact">
      <h2>Contact</h2>
      <form class="fieldset" name="contact" method="POST" data-netlify="true">
        <input type="hidden" name="form-name" value="contact" />
        <div class="grid cols-3">
          <div><label>Name</label><input name="name" required /></div>
          <div><label>Email</label><input name="email" type="email" required /></div>
          <div><label>WhatsApp</label><input name="whatsapp" placeholder="+27 ..." /></div>
        </div>
        <label>Message</label>
        <textarea name="message" rows="4" placeholder="How can we help?"></textarea>
        <div style="margin-top:12px"><button class="btn blue" type="submit">Send</button></div>
      </form>
    </section>
  </main>

  <footer class="wrap" style="border-top:3px solid var(--orange);padding:16px 0;margin-top:26px">
    📧 info@ohshaven.com · WhatsApp: +27 71 123 4567 · © 2025 OHS Haven
  </footer>

  <!-- ===== MELLY FAQ WIDGET ===== -->
  <button class="melly-fab" id="mellyFab" aria-label="Open Melly">
    <img src="assets/avatar.jpg" alt="Melly avatar">
  </button>
  <aside class="melly-box" id="mellyBox" role="dialog" aria-label="Melly — Your Safety Assistant">
    <div class="melly-head">Melly — Your Safety Assistant</div>
    <div class="melly-body">
      <div class="pic"><img src="assets/avatar.jpg" alt="" style="width:100%;height:100%;object-fit:cover"></div>
      <div class="txt" id="mellyTxt">
        Hi 👋 Need posters, the training kit, a daily checklist, or a quick OHS answer?
      </div>
    </div>
    <div class="melly-actions">
      <button data-q="posters">Show posters</button>
      <button data-q="checklist">Run daily checklist</button>
      <button data-q="ergo">Ergonomics</button>
      <button data-q="contact">Contact</button>
    </div>
  </aside>

  <!-- ===== JS: Melly (mobile-smart) ===== -->
  <script>
    const $ = (s,c=document)=>c.querySelector(s);
    const mellyBox=$('#mellyBox'), mellyFab=$('#mellyFab'), mellyTop=$('#mellyToggleTop'), mellyTxt=$('#mellyTxt');
    const isMobile=()=> window.matchMedia('(max-width:767px)').matches || /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    function openM(){ if(mellyBox) mellyBox.style.display='block'; }
    function closeM(){ if(mellyBox) mellyBox.style.display='none'; }
    function toggleM(){ if(!mellyBox) return; mellyBox.style.display = (mellyBox.style.display==='block')?'none':'block'; }
    if(mellyFab) mellyFab.addEventListener('click',toggleM);
    if(mellyTop) mellyTop.addEventListener('click',toggleM);
    document.addEventListener('click',(e)=>{ const i=mellyBox&&(mellyBox.contains(e.target)||e.target===mellyFab||e.target===mellyTop); if(!i) closeM();});
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeM();});
    function greetOnce(){
      const KEY='melly_greet_v3';
      try{
        if(!localStorage.getItem(KEY)){
          if(mellyTxt) mellyTxt.textContent = "Hi 👋 I’m Melly. Try: Show posters • Run daily checklist • Ergonomics";
          setTimeout(()=>openM(), isMobile()?1800:800);
          localStorage.setItem(KEY,'1');
        }
      }catch(_){
        setTimeout(()=>openM(), isMobile()?1800:800);
      }
    }
    (function wireActs(){
      if(!mellyBox) return;
      mellyBox.querySelectorAll('.melly-actions button').forEach(b=>{
        b.addEventListener('click',()=>{
          const q=b.dataset.q;
          if(q==='posters'){ location.hash='#downloads'; closeM(); }
          else if(q==='checklist'){ location.hash='#daily'; closeM(); }
          else if(q==='ergo'){ location.href='/ergo/'; }
          else if(q==='contact'){ location.hash='#contact'; closeM(); }
        });
      });
    })();
    document.addEventListener('DOMContentLoaded', greetOnce);
  </script>
</body>
</html>
